<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RealityCheck – Interactive Country Comparison</title>

  <link rel="stylesheet" href="style.css" />
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
  <meta http-equiv="Pragma" content="no-cache" />
  <meta http-equiv="Expires" content="0" />

<style>
  html, body {
    overflow: hidden;
  }
  main {
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }
  #main-frame {
    height: calc(100vh - 160px);
    border: none;
  }
</style>

</head>

<body>
<header>
  <a href="#" id="logo-link" onclick="loadPage('countries.html', this)">
    <img id="logo" src="images/logo_flow_globe.png" alt="RealityCheck Logo" />
    <span id="logo-text">RealityCheck</span>
  </a>

  <nav>
    <a href="#" onclick="loadPage('countries.html', this)" class="active">Countries</a>
    <a href="#" onclick="loadPage('world.html', this)">World</a>
    <a href="#" onclick="loadPage('overall_ranking_countries.html', this)">Overall Ranking</a>
    <a href="#" onclick="loadPage('analysis.html', this)">Analysis</a>
  </nav>
</header>


  <main>
    <div id="frame-loader" class="active"><div class="spinner"></div></div>
    <iframe id="main-frame" src="countries.html" title="RealityCheck Content"></iframe>
  </main>

  <footer>
    <div id="tracking-wrapper">
      <div id="total-visitors">Visitors: loading…</div>
    </div>
    <p style="margin-top:.6rem;">
      © RealityCheck Project —
      <a href="#" onclick="loadPage('impressum.html', null)">Impressum</a> |
      <a href="#" onclick="loadPage('privacy.html', null)">Privacy</a> |
      <a href="#" onclick="loadPage('data_glossary.html', null)">Data Glossary</a> |
      <a href="#" onclick="loadPage('about.html', null)">About</a>
    </p>
  </footer>

  <script>
    function loadPage(page, link) {
      const frame = document.getElementById("main-frame");
      const loader = document.getElementById("frame-loader");
      frame.src = page + "?t=" + Date.now();
      loader.classList.add("active");
      document.querySelectorAll("nav a").forEach(a => a.classList.remove("active"));
      if (link) link.classList.add("active");
    }

    const frame = document.getElementById("main-frame");
    frame.addEventListener("load", () => {
      document.getElementById("frame-loader").classList.remove("active");
    });

    async function loadVisitorStats() {
      const el = document.getElementById("total-visitors");
      if (!el) return;
      try {
        const resp = await fetch("tracking.json?nocache=" + Date.now());
        const data = await resp.json();
        el.textContent = "Visitors total: " + (data.total || 0);
      } catch {
        el.textContent = "Visitors total: unavailable";
      }
    }
    loadVisitorStats();
  </script>
  <script>
  // Scrollt das iframe an den Anfang, wenn Nutzer den Header antippt
  document.querySelector("header").addEventListener("click", () => {
    const frame = document.getElementById("main-frame");
    if (frame && frame.contentWindow) {
      frame.contentWindow.scrollTo({ top: 0, behavior: "smooth" });
    }
  });
</script>

</body>
</html>
