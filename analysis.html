<!-- analysis.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RealityCheck â€“ Global Analysis</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <section class="page-intro">
    <h1>ğŸ§  RealityCheck â€“ Global KPI Analysis</h1>
    <p>
      This AI-generated report interprets the global dataset across all KPIs, revealing key trends,
      progress, risks, and interdependencies shaping humanityâ€™s trajectory.
    </p>
    <p>
      It connects developments across domains â€” economy, environment, society, and governance â€”
      to paint a clearer picture of where the world is heading.
    </p>
    <p class="note">
      The full analysis below is automatically derived from the most recent data fetch
      and updated regularly.
    </p>
  </section>

  <section id="analysis-section">
    <div id="analysis-content">â³ Loading analysis...</div>
  </section>

  <!-- Markdown Parser -->
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <script>
    const section = document.getElementById("analysis-section");
    const container = document.getElementById("analysis-content");

    fetch("data/analysis.md")
      .then(r => {
        if (!r.ok) throw new Error("File not found");
        return r.text();
      })
      .then(md => {
        const html = marked.parse(md.trim());
        container.innerHTML = html;
        section.classList.add("loaded");
      })
      .catch(() => {
        container.innerText =
          "âš ï¸ No analysis found. Please run fetch_data.py to generate a new report.";
        section.classList.add("loaded");
      });
  </script>
</body>
</html>
