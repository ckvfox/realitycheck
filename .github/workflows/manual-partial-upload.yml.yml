name: üåê RealityCheck ‚Äì Partial FTP Upload

on:
  workflow_dispatch:      # Manuell startbar in GitHub Actions
    inputs:
      files:
        description: "Dateien oder Ordner (kommagetrennt) aus dem Repo-Root, die hochgeladen werden sollen"
        required: true
        default: "index.html, style.css, scripts/script.js"

jobs:
  ftp_upload:
    runs-on: ubuntu-latest
    env:
      TZ: Europe/Berlin

    steps:
      - name: üßæ Checkout repository
        uses: actions/checkout@v4

      - name: üìÇ Prepare upload list
        id: prep
        run: |
          echo "FILES=$(echo '${{ github.event.inputs.files }}' | tr ',' '\n' | sed 's/^ *//;s/ *$//')" >> $GITHUB_ENV
          echo "üì¶ Preparing to upload the following files:"
          echo "${{ github.event.inputs.files }}"

      - name: üöÄ FTP Deploy selected files
        uses: SamKirkland/ftp-deploy-action@v4.3.5
        with:
          server: ${{ secrets.FTP_SERVER }}
          username: ${{ secrets.FTP_USERNAME }}
          password: ${{ secrets.FTP_PASSWORD }}
          protocol: ftps
          local-dir: ./
          server-dir: ${{ secrets.FTP_DIR }}/
          state-name: .ftp-deploy-sync-state-partial.json
          log-level: verbose
          exclude: |
            **/.git*
            **/.github*
            **/__pycache__/
            **/data/**
            **/*.py
            **/*.md
            **/*.yml
          # ‚¨áÔ∏è Nur bestimmte Dateien hochladen
          include: |
            ${{ github.event.inputs.files }}
